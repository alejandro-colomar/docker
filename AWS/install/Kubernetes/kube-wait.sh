#!/bin/bash
#########################################################################
#      Copyright (C) 2020        Sebastian Francisco Colomar Bauza      #
#      SPDX-License-Identifier:  GPL-2.0-only                           #
#########################################################################
export debug=$debug							;
#########################################################################
su ssm-user								;
#########################################################################
set +x && test "$debug" = true && set -x				;
#########################################################################
while true								;
do									\
	test								\
		-f							\
			$HOME/.kube/config				\
	&&								\
	break								\
									;
ls -l $HOME/.kube 2>&1						
	sleep								\
		3							\
									;
done									;	
#########################################################################
while true								;
do									\
	kubectl get node						\
	|								\
		grep Ready						\
		&&							\
		break							\
									;
kubectl get node 2>&1
	sleep								\
		3							\
									;
done									;
#########################################################################
echo ready								;
#########################################################################
